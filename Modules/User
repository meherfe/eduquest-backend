import mongoose from 'mongoose';
import bcrypt from 'bcrypt';

const { Schema, model } = mongoose;

const userSchema = new Schema({
  nom: String,
  prenom: String,
  email: String,
  login: String,
  password: String,
  phone: Number,
  role : {
    type : String,
    enum : ['admin', 'etudiant', 'enseignant'],
},
  status: { type: String, default: 'disabled' },
}, { collection: 'User' }); // Specify the collection name here

userSchema.pre('save', async function (next){

    this.password = await bcrypt.hash(this.password, 12);
    next();
})
const User = model('User', userSchema);

export default User;
